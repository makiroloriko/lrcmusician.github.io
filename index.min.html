<!doctype html><html lang="en"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>LRCIAN CHORDS</title><script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer="defer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer="defer"></script><style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;padding:18px;background:#f7fafc}.app{max-width:900px;margin:0 auto;background:#fff;padding:18px;border-radius:8px;box-shadow:0 6px 20px rgba(2,6,23,.08)}textarea{width:90%;min-height:180px;padding:10px;font-family:monospace}.row{display:flex;gap:8px;align-items:center;margin-bottom:8px}.btn{padding:8px 12px;border-radius:6px;border:1px solid #d1d5db;background:#fff;cursor:pointer}.btn-primary{background:#0ea5a4;color:#fff;border:none}.preview{white-space:pre-wrap;background:#f1f5f9;padding:12px;border-radius:6px;font-family:monospace}.controls{display:flex;gap:8px;flex-wrap:wrap}.field{display:flex;flex-direction:column}label{font-size:13px;color:#374151}input[type=text]{padding:8px;border-radius:6px;border:1px solid #e5e7eb}small{color:#6b7280}.line{display:block}.chord-line{font-weight:700;color:#1f2937;height:1.5em}.lyric-line{height:1.5em}.preview-title{font-weight:700;font-size:1.1rem;margin-bottom:2px}.preview-meta{font-size:.9rem;color:#555;margin-bottom:10px}.border-red-500{border-color:#ef4444!important}.border-red-500:focus{box-shadow:0 0 0 3px rgba(239,68,68,.3)}</style><div class="app" x-data="lyricsApp()" x-init="loadSongs()"><h2>LRC MUSICIAN CHORDS AND LYRICS</h2><div class="field" style="margin-bottom:16px;position:relative"><label>Search Song</label> <input type="text" x-model="search" placeholder="Type to search songs..." class="w-full p-2 border rounded" @input="filterSongs()" @focus="showDropdown = true" @blur="setTimeout(() => showDropdown = false, 200)"><ul x-show="showDropdown && filteredSongs.length > 0" class="border border-gray-300 bg-white rounded mt-1 shadow absolute z-10 w-full max-h-60 overflow-auto"><template x-for="file in filteredSongs" :key="file.name"><li class="px-3 py-2 hover:bg-blue-100 cursor-pointer" @click="selectSong(file)" x-text="file.name.replace('.txt', '')"></template></ul></div><p x-show="error" class="text-red-600" x-text="error"><div class="row"><div class="field" style="flex:1"><label>Title</label> <input type="text" x-model="metadata.title" placeholder="Song title" class="border-red-500"></div><div class="field" style="flex:1"><label>Artist</label> <input type="text" x-model="metadata.artist" placeholder="Artist" class="border-red-500"></div><div class="field" style="width:140px"><label>Key</label> <input type="text" x-model="metadata.key" placeholder="C" style="width:50%!important" class="border-red-500"></div></div><div class="row"><div style="flex:1"><label>Paste lyrics here. Put chords inline using square brackets, e.g. "[C]Hello [D/F#]world"</label> <textarea x-model="raw" placeholder="[C]Hello [D/F#]world&#10;[C]Another line"></textarea></div><div style="width:260px"><label>Chord tools</label><div class="controls"><button class="btn" @click="insertChordPrompt()">Insert chord</button> <button class="btn" @click="shift(-1)">Transpose -1</button> <button class="btn" @click="shift(1)">Transpose +1</button> <button class="btn btn-primary" @click="resetTranspose()">Reset</button></div><p style="margin-top:8px"><small>Supports slash chords (e.g. D/F#)</small></p><button class="btn btn-primary" @click="saveToGithub()">Save Chords</button><p><small x-text="github.status"></small></div></div><div class="row"><div style="flex:1"><label>Preview (aligned chords)</label> <button class="btn btn-primary" @click="downloadPreviewAsImage()" style="margin:10px">Download as Image</button><div class="preview" x-html="alignedPreview"></div></div><div style="width:320px;display:none"><label>Export / Save</label><div style="display:flex;flex-direction:column;gap:8px;margin-top:8px"><button class="btn btn-primary" @click="downloadJson()">Download JSON</button><div style="border:1px solid #e5e7eb;padding:10px;border-radius:6px"><label><small>Save to GitHub (token required)</small></label> <input type="text" x-model="github.token" placeholder="Personal Access Token"> <input type="text" x-model="github.owner" placeholder="Owner (username or org)"> <input type="text" x-model="github.repo" placeholder="Repo name"> <input type="text" x-model="github.path" placeholder="Path/filename (e.g. songs/my-song.json)"> <input type="text" x-model="github.branch" placeholder="Branch (default: main)"></div></div></div></div><hr><div style="display:none"><h4>Raw parsed JSON</h4><pre style="max-height:240px;overflow:auto;background:#0f172a;color:#e2e8f0;padding:12px;border-radius:6px" x-text="JSON.stringify(parsed(),null,2)"></pre></div></div><script>function lyricsApp(){return{raw:"[C]Hello [D/F#]world\n[C]Another line",metadata:{title:"",artist:"",key:""},transposeSteps:0,github:{token:"",owner:"",repo:"",path:"",branch:"main",status:""},noteMap:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],altMap:{Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"},error:"",songs:[],search:"",filteredSongs:[],showDropdown:!1,parsed(){const t=this.raw.split("\n");return{title:this.metadata.title||"",key:this.metadata.key||"",metadata:this.metadata,transpose:this.transposeSteps,created_at:(new Date).toISOString(),lines:t.map(t=>{const e=[],a=/\[([^\]]+)\]/g;let s,i=0;for(;s=a.exec(t);){const a=s[1],r=t.slice(i,s.index);r&&e.push({text:r}),e.push({chord:a}),i=s.index+s[0].length}const r=t.slice(i);return r&&e.push({text:r}),e})}},init(){this.loadSongs()},get alignedPreview(){return(this.metadata.title?`<div class='preview-title'>${this.metadata.title}</div>`:"")+(this.metadata.key?`<div class='preview-meta'>Key: ${this.metadata.key}</div>`:"")+this.raw.split("\n").map(t=>{let e="",a="",s=0;const i=/\[([^\]]+)\]/g;let r;for(;r=i.exec(t);){const i=r[1],n=t.slice(s,r.index);a+=n;const o=n.length;e+=" ".repeat(o)+i,s=r.index+r[0].length}const n=t.slice(s);return a+=n,e+=" ".repeat(n.length),`<div class='line'><div class='chord-line'>${e}</div><div>${a}</div></div>`}).join("")},async loadSongs(){const t=await fetch("https://api.github.com/repos/makiroloriko/Songs/contents/songs");this.songs=await t.json()},async downloadPreviewAsImage(){if(!this.metadata.title.trim()&&0===this.metadata.title.trim().length)return void(this.error="Title is required.");if(!this.metadata.key.trim()&&0===this.metadata.key.trim().length)return void(this.error="Key is required.");const t=document.querySelector(".preview"),e=(await html2canvas(t,{backgroundColor:"#f7fafc"})).toDataURL("image/png"),a=document.createElement("a");a.href=e,a.download=(this.metadata.title+" Key of"+this.metadata.key||"song")+".png",a.click()},filterSongs(){const t=this.search.toLowerCase();if(0===t.length)return this.filteredSongs=[],void this.clearData();this.filteredSongs=this.songs.filter(e=>e.name.toLowerCase().includes(t))},clearData(){this.raw="",this.metadata.title="",this.metadata.artist="",this.metadata.key="",this.transposeSteps=0,this.error=""},async selectSong(t){this.search=t.name.replace(".txt",""),this.showDropdown=!1;const e=await fetch(t.download_url),a=await e.json();this.raw=a.raw||"",this.metadata.title=a.title||this.search,this.metadata.artist=a.artist||"",this.metadata.key=a.key||""},insertChordPrompt(){const t=prompt("Enter chord (e.g. C, G, Am, D/F#):");if(!t)return;const e=document.querySelector("textarea"),a=e.selectionStart||this.raw.length,s=e.selectionEnd||a;this.raw=this.raw.slice(0,a)+"["+t+"]"+this.raw.slice(s),this.$nextTick(()=>e.focus())},shift(t){this.transposeSteps+=t;if(this.raw=this.raw.replace(/\[([^\]]+)\]/g,(e,a)=>{const s=a.split("/"),i=this.transposeChord(s[0].trim(),t);if(s.length>1){return`[${i}/${this.transposeChord(s[1].trim(),t)}]`}return`[${i}]`}),this.metadata.key){const e=this.metadata.key.split("/"),a=this.transposeChord(e[0].trim(),t);if(e.length>1){const s=this.transposeChord(e[1].trim(),t);this.metadata.key=`${a}/${s}`}else this.metadata.key=a}},resetTranspose(){this.shift(-this.transposeSteps),this.transposeSteps=0},transposeChord(t,e){this.altMap[t]&&(t=this.altMap[t]);let a=this.noteMap.indexOf(t);if(-1===a)return t;let s=(a+e)%12;return s<0&&(s+=12),this.noteMap[s]},downloadJson(){const t={title:this.metadata.title||"",artist:this.metadata.artist||"",key:this.metadata.key||"",raw:this.raw},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download=(this.metadata.title||"song")+".json",s.click(),URL.revokeObjectURL(a)},async saveToGithub(){if(this.error="",!this.metadata.title.trim()&&0===this.metadata.title.trim().length)return void(this.error="Title is required.");if(!this.metadata.artist.trim()&&0===this.metadata.artist.trim().length)return void(this.error="Artist is required.");if(!this.metadata.key.trim()&&0===this.metadata.key.trim().length)return void(this.error="Key is required.");const t="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";const e={title:this.metadata.title||"",artist:this.metadata.artist||"",key:this.metadata.key||"",raw:this.raw},a=`https://api.github.com/repos/makiroloriko/Songs/contents/songs/${this.metadata.title.trim().toLowerCase().replace(/\s+/g,"-")+" Artist_"+this.metadata.artist+" key_of "+this.metadata.key+".json"}`,s={Authorization:"token "+t,Accept:"application/vnd.github+json"};let i=null;try{const t=await fetch(a+"?ref="+(this.github.branch||"main"),{headers:s});if(t.ok){i=(await t.json()).sha}}catch(t){}const r={message:`Add song: ${this.metadata.title}`,content:btoa(unescape(encodeURIComponent(JSON.stringify(e,null,2)))),branch:this.github.branch||"main"};i&&(r.sha=i);try{const t=await fetch(a,{method:"PUT",headers:s,body:JSON.stringify(r)}),e=await t.json();t.ok?this.github.status="Saved: "+(e.content&&e.content.path?e.content.path:"ok"):this.github.status="Error: "+(e.message||t.status)}catch(t){this.github.status="Network/error: "+t.message}}}}</script>